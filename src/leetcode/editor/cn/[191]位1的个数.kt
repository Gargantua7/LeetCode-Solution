//ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›žå…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º '1' çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸ºæ±‰æ˜Žé‡é‡ï¼‰ã€‚ 
//
// 
//
// æç¤ºï¼š 
//
// 
// è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»åž‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»åž‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®žçŽ°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„
//è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ 
// åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ ç¤ºä¾‹ 3 ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚ 
// 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼š00000000000000000000000000001011
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000000001011 ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼š00000000000000000000000010000000
//è¾“å‡ºï¼š1
//è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000010000000 ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼š11111111111111111111111111111101
//è¾“å‡ºï¼š31
//è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 ä¸­ï¼Œå…±æœ‰ 31 ä½ä¸º '1'ã€‚ 
//
// 
//
// æç¤ºï¼š 
//
// 
// è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚ 
// 
//
// 
// 
//
// 
//
// è¿›é˜¶ï¼š 
//
// 
// å¦‚æžœå¤šæ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä½ å°†å¦‚ä½•ä¼˜åŒ–ä½ çš„ç®—æ³•ï¼Ÿ 
// 
// Related Topics ä½è¿ç®— ðŸ‘ 372 ðŸ‘Ž 0


package leetcode.editor.cn

/**
 * 191
 * ä½1çš„ä¸ªæ•°
 *
 * @author Gargantuaä¸¶
 * 2021-08-24 02:50:14
 */
class NumberOf1Bits {
//leetcode submit region begin(Prohibit modification and deletion)
    /**
     * @see Integer.bitCount
     */
    class Solution {
        // you need treat n as an unsigned value
        fun hammingWeight(n: Int): Int {
            var i = n
            // ab -> a + b = ?? -> ab - a = ??
            // 11 -> 1 + 1 = 10 -> 11 - 1 = 10
            // 10 -> 1 + 0 = 01 -> 10 - 1 = 01
            // 01 -> 0 + 1 = 00 -> 01 - 0 = 01
            // 00 -> 0 + 0 = 00 => 00 - 0 = 00
            i -= i ushr 1 and 0x55555555 // i = i - (i >>> 1 & 0x55555555)
            // standard
            i = (i and 0x33333333) + (i ushr 2 and 0x33333333) // i = (i & 0x33333333) + (i >>> 2 & 0x33333333)
            // 0adc 0xyz                    -> 0adc + 0xyz = ????
            //  -> 0abc 0xyz + 0abc and 1111 = 0adc + 0xyz = ????
            // (abc & xyz must be less than 100, because at most 4 bits 1)

            // 0000 0100                    -> 0000 + 0100 = 0100
            //  -> 0000 0100 + 0000 and 1111 = 0000 + 0100 = 0100

            // 0100 0100                    -> 0100 + 0100 = 1000
            //  -> 0100 0100 + 0100 and 1111 = 0100 + 0100 = 1000

            // 0011 0011                    -> 0011 + 0011 = 1010
            //  -> 0011 0011 + 0011 and 1111 = 0011 + 0011 = 1010

            // and more...
            i = (i + (i ushr 4)) and 0x0f0f0f0f // i = (i + (i >>> 4) & 0x0f0f0f0f
            // the final answer must be less than 10 0000, because at most 32 bits 1,
            // but per-unit in 0x00ff00ff is 1111 1111, it is more than 32,
            // so it doesn't matter if ignore it.
            i = i ushr 8 // i = i + (i >>> 8)
            // ditto
            i += i ushr 16 // i = i + (i >>> 16)
            // at the end, we should clean the bits where more than 10 0000
            // 0x3f -> 11 1111
            return i and 0x3f
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}
